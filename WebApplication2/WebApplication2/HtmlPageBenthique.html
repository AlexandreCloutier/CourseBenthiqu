<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="style.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

</head>
<body onload="startGame()">
    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script src="https://code.jquery.com/ui/1.12.0/jquery-ui.js"></script>
    <script>
        var paquetCarte;

        //Fonction appeler au début, elle "start" le jeu.
        function startGame() {
            creerFond();
            ajouterEmplacementHabitatBas();
            ajouterEmplacementCarteBas();
            paquetCarte = creerPaquetCarte();
            melangerPaquetCarte(paquetCarte);
            creerMain();
            creerPartieDroite();
        }

        //Fonction qui ajoute la partie de droite.
        function creerPartieDroite() {
            var divNomJoueurs = document.createElement('div');
            divNomJoueurs.id = 'divNomJoueurs';
            divNomJoueurs.className = 'divNomJoueurs';
            divNomJoueurs.innerHTML = '<strong> Nom de l\'équipe A: Toto <br /> Nom de l\'équipe B: Tata</strong>';
            document.getElementById('divDroite').appendChild(divNomJoueurs);


            var divTextePointsRessource = document.createElement('div');
            divTextePointsRessource.id = 'divTextePointsRessource';
            divTextePointsRessource.className = 'divTextePointsRessource';
            divTextePointsRessource.innerHTML = '<strong>Points de ressources disponible : 6</strong>';
            document.getElementById('divDroite').appendChild(divTextePointsRessource);

            var divTextePointsJoueurs = document.createElement('div');
            divTextePointsJoueurs.id = 'divTextePointsJoueurs';
            divTextePointsJoueurs.className = 'divTextePointsJoueurs';
            divTextePointsJoueurs.innerHTML = '<p class=titrePoint>Points:</p><p class=pointsEquipe>Équipe A: 100 <br/> Équipe B: 100 </p>';
            document.getElementById('divDroite').appendChild(divTextePointsJoueurs);

            var divTexteMessageJeu = document.createElement('div');
            divTexteMessageJeu.id = 'divTexteMessageJeu';
            divTexteMessageJeu.className = 'divTexteMessageJeu';
            divTexteMessageJeu.innerHTML = '<p></p><strong>Zone de message:</strong> Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas suscipit, nibh vel sodales malesuada, justo sem consectetur lacus, quis pulvinar erat orci id mauris. Maecenas pulvinar risus sit amet justo</strong>';
            divTexteMessageJeu.style.width = 280 + 'px';
            document.getElementById('divDroite').appendChild(divTexteMessageJeu);

            var buttonPasserTour = document.createElement('button');
            buttonPasserTour.id = 'buttonPasserTour';
            buttonPasserTour.className = 'buttonPasserTour';
            buttonPasserTour.textContent = 'Passer son tour';
            document.getElementById('divDroite').appendChild(buttonPasserTour);

            var buttonProposerEchange = document.createElement('button');
            buttonProposerEchange.id = 'buttonProposerEchange';
            buttonProposerEchange.className = 'buttonProposerEchange';
            buttonProposerEchange.textContent = 'Proposer un échange.';
            document.getElementById('divDroite').appendChild(buttonProposerEchange);

            var buttonOption = document.createElement('button');
            buttonOption.id = 'buttonOption';
            buttonOption.className = 'buttonOption';
            buttonOption.textContent = 'Options';
            document.getElementById('divDroite').appendChild(buttonOption);
        }

        //Fonction qui ajoute une div avec le plateau en fond d'écran.
        function creerFond() {
            //Partie de gauche.
            var divMain = document.createElement('div');
            divMain.id = 'divMain';
            divMain.className = 'divMain';
            document.getElementsByTagName('body')[0].appendChild(divMain);

            //Partie du millieu.
            var plateau = document.createElement('div');
            plateau.id = 'plateau';
            plateau.className = 'plateau';
            document.getElementsByTagName('body')[0].appendChild(plateau);

            //Partie de droite.
            var divDroite = document.createElement('div');
            divDroite.id = 'divDroite';
            divDroite.className = 'divDroite';
            document.getElementsByTagName('body')[0].appendChild(divDroite);
        }

        //Fonction qui ajoute 6 emplacement d'habitats dans le bas.
        function ajouterEmplacementHabitatBas() {
            //Boucle 6 fois pour ajouter les 6 emplacements D'habitats du bas.
            var id;
            for (id = 1; id < 7; id++) {
                var divEmplacementHabitat = document.createElement('div');
                divEmplacementHabitat.id = 'divEmplacementHabitatBas' + id;
                divEmplacementHabitat.className = 'divEmplacementHabitatBas';
                divEmplacementHabitat.style.left = 116 + 66 * id + 'px';
                document.getElementById('plateau').appendChild(divEmplacementHabitat);
                $(function () {
                    $('.divEmplacementHabitatBas').droppable({
                        drop: function (event, ui) {
                            ui.draggable.css('width', '59px');
                            ui.draggable.css('height', '90px');
                            ui.draggable.appendTo(this);
                            ui.draggable.draggable('disable');
                            ui.draggable.position({ of: $(this), my: 'center', at: 'center' });
                            if ($(this).children().length > 1) {
                                ui.draggable.css('margin-top', ($(this).children().length * 10) - 10 + 'px');
                            }
                        }
                    });
                });
            }
        }

        //Fonction qui ajoute 4 emplacement de carte sur les emplacements d'habitats du bas.
        function ajouterEmplacementCarteBas() {
            //Boucle 4 fois pour ajouter les 4 emplacements sur les emplacements D'habitats du bas.
            var id;
            for (id = 1; id < 5; id++) {
                var divEmplacementCarte = document.createElement('div');
                divEmplacementCarte.id = 'divEmplacementCarteBas' + id;
                divEmplacementCarte.className = 'divEmplacementCarteBas';
                divEmplacementCarte.style.left = 181 + 66 * id + 'px';
                document.getElementById('plateau').appendChild(divEmplacementCarte);
                $(function () {
                    $('.divEmplacementCarteBas').droppable({
                        drop: function (event, ui) {
                            ui.draggable.css('width', '59px');
                            ui.draggable.css('height', '90px');
                            ui.draggable.appendTo(this);
                            ui.draggable.draggable('disable');
                            ui.draggable.position({ of: $(this), my: 'center', at: 'center' });
                            if ($(this).children().length > 1) {
                                ui.draggable.css('margin-top', ($(this).children().length * 10) - 10 + 'px');
                            }
                        }
                    });
                });
            }
        }

        function creerMain() {
            var id;
            for (id = 1; id < 7; id++) {
                var li = document.createElement('li');
                li.className = 'liMain';
                document.getElementById('divMain').appendChild(li);
                var divCarte = document.createElement('div');
                divCarte.id = 'divCarte' + id;
                divCarte.className = 'divCarte';
                li.appendChild(divCarte);

                var image = document.createElement('img');
                image.id = 'imageCarte' + id;
                image.className = 'imageCarte';
                image.src = 'resources/CarteEau.jpg';
                // Mes image Dans le idiv
                divCarte.appendChild(image);

                $(function () {
                    $('.divCarte').draggable({ revert: 'invalid', cursorAt: { top: 90, left: 59 } });
                });
            }
        }

        //Définition de la classe.
        function Carte(type, nom, nomImage, coutResource, params) {
            if (type === 'predateur') {
                this.nom = nom;
                this.type = type;
                this.tolerance = params.tolerance;
                this.force = params.force;
                this.coutResources = params.coutResources;
                this.condition = params.condition;
            }
            else if (type === 'habitats') {
                this.nom = nom;
                this.type = type;
                this.habitats = params.habitats;
                this.coutResources = params.coutResources;
            }
            else if (type === 'salmonide') {
                this.nom = nom;
                this.type = type;
                this.coutResources = params.coutResources;
                this.condition = params.condition;
            }
            else if (type === 'bandeRiveraine') {
                this.nom = nom;
                this.type = type;
                this.coutResources = params.coutResources;
            }
        }

        //function pour piger une carte.
        function pigerCarte(paquetCarte) {
            return paquetCarte.pop();
        }

        //Function qui melange le paquet de carte.
        function melangerPaquetCarte(paquetCarte) {
            var currentIndex = paquetCarte.length, temporaryValue, randomIndex;

            // While there remain elements to shuffle...
            while (0 !== currentIndex) {

                // Pick a remaining element...
                randomIndex = Math.floor(Math.random() * currentIndex);
                currentIndex -= 1;

                // And swap it with the current element.
                temporaryValue = paquetCarte[currentIndex];
                paquetCarte[currentIndex] = paquetCarte[randomIndex];
                paquetCarte[randomIndex] = temporaryValue;
            }
        }

        //function qui crée le paquet de carte.
        function creerPaquetCarte() {
            var carte;
            var paquetCarte = new Array();

            carte = new Carte('habitats', 'fosse', 'fosse.jpg', 1, { habitats: 'fosse' });
            paquetCarte.push(carte);
            paquetCarte.push(carte);
            paquetCarte.push(carte);
            paquetCarte.push(carte);

            carte = new Carte('habitats', 'sable', 'sable.jpg', 1, { habitats: 'sable' });
            paquetCarte.push(carte);
            paquetCarte.push(carte);
            paquetCarte.push(carte);
            paquetCarte.push(carte);

            carte = new Carte('habitats', 'gravier', 'gravier.jpg', 2, { habitats: 'gravier' });
            paquetCarte.push(carte);
            paquetCarte.push(carte);
            paquetCarte.push(carte);
            paquetCarte.push(carte);
            paquetCarte.push(carte);
            paquetCarte.push(carte);

            carte = new Carte('habitats', 'rapide', 'rapide.jpg', 3, { habitats: 'rapide' });
            paquetCarte.push(carte);
            paquetCarte.push(carte);
            paquetCarte.push(carte);
            paquetCarte.push(carte);
            paquetCarte.push(carte);
            paquetCarte.push(carte);
            paquetCarte.push(carte);
            paquetCarte.push(carte);

            carte = new Carte('habitats', 'galets', 'galets.jpg', 3, { habitats: 'galets' });
            paquetCarte.push(carte);
            paquetCarte.push(carte);
            paquetCarte.push(carte);
            paquetCarte.push(carte);
            paquetCarte.push(carte);

            carte = new Carte('speciale', 'prisSurFait', 'prisSurFait.jpg', 0);
            paquetCarte.push(carte);
            paquetCarte.push(carte);
            paquetCarte.push(carte);
            paquetCarte.push(carte);

            carte = new Carte('speciale', 'pecheur', 'pecheur.jpg', 0);
            paquetCarte.push(carte);
            paquetCarte.push(carte);

            carte = new Carte('speciale', 'crueSoudaine', 'crueSoudaine.jpg', 0);
            paquetCarte.push(carte);
            paquetCarte.push(carte);

            carte = new Carte('speciale', 'zonage', 'zonage.jpg', 0);
            paquetCarte.push(carte);
            paquetCarte.push(carte);

            carte = new Carte('speciale', 'retention', 'retention.jpg', 0);
            paquetCarte.push(carte);
            paquetCarte.push(carte);

            carte = new Carte('speciale', 'emergence', 'emergence.jpg', 0);
            paquetCarte.push(carte);
            paquetCarte.push(carte);

            carte = new Carte('speciale', 'derivation', 'derivation.jpg', 0);
            paquetCarte.push(carte);
            paquetCarte.push(carte);

            carte = new Carte('speciale', 'accumulation', 'accumulation.jpg', 0);
            paquetCarte.push(carte);
            paquetCarte.push(carte);

            carte = new Carte('speciale', 'predation', 'predation.jpg', 0);
            paquetCarte.push(carte);
            paquetCarte.push(carte);
            paquetCarte.push(carte);
            paquetCarte.push(carte);
            paquetCarte.push(carte);
            paquetCarte.push(carte);
            paquetCarte.push(carte);
            paquetCarte.push(carte);

            carte = new Carte('action', 'corveNettoyage', 'corveNettoyage.jpg', 1);
            paquetCarte.push(carte);
            paquetCarte.push(carte);
            paquetCarte.push(carte);

            carte = new Carte('action', 'naturalisation', 'naturalisation.jpg', 2);
            paquetCarte.push(carte);
            paquetCarte.push(carte);
            paquetCarte.push(carte);

            carte = new Carte('action', 'amenagement', 'amenagement.jpg', 3);
            paquetCarte.push(carte);
            paquetCarte.push(carte);
            paquetCarte.push(carte);

            carte = new Carte('perturbation', 'dechets', 'dechets.jpg', 2, { tempsActif: 0 });
            paquetCarte.push(carte);
            paquetCarte.push(carte);
            paquetCarte.push(carte);
            paquetCarte.push(carte);

            carte = new Carte('perturbation', 'erosion', 'erosion.jpg', 3, { tempsActif: 0 });
            paquetCarte.push(carte);

            carte = new Carte('perturbation', 'passageToutTerrain', 'passageToutTerrain.jpg', 3, { tempsActif: 1 });
            paquetCarte.push(carte);
            paquetCarte.push(carte);
            paquetCarte.push(carte);

            carte = new Carte('perturbation', 'artificialisation', 'artificialisation.jpg', 3, { tempsActif: 0 });
            paquetCarte.push(carte);
            paquetCarte.push(carte);
            paquetCarte.push(carte);

            carte = new Carte('perturbation', 'pollutionOrganique', 'pollutionOrganique.jpg', 4, { tempsActif: 2 });
            paquetCarte.push(carte);
            paquetCarte.push(carte);

            carte = new Carte('perturbation', 'deversement', 'deversement.jpg', 2, { tempsActif: 1 });
            paquetCarte.push(carte);
            paquetCarte.push(carte);

            carte = new Carte('reglementation', 'assainissement', 'assainissement.jpg', 3);
            paquetCarte.push(carte);

            carte = new Carte('reglementation', 'interdiction', 'interdiction.jpg', 3);
            paquetCarte.push(carte);

            carte = new Carte('reglementation', 'politique', 'politique.jpg', 3);
            paquetCarte.push(carte);

            carte = new Carte('macroInvertebre', 'oligochaeta', 'oligochaeta.jpg', 1, { tolerance: 8, taille: 1 });
            carte = new Carte('macroInvertebre', 'oligochaeta', 'oligochaeta.jpg', 1, { tolerance: 8, taille: 1 });
            carte = new Carte('macroInvertebre', 'oligochaeta', 'oligochaeta.jpg', 1, { tolerance: 8, taille: 1 });
            carte = new Carte('macroInvertebre', 'oligochaeta', 'oligochaeta.jpg', 1, { tolerance: 8, taille: 1 });
            carte = new Carte('macroInvertebre', 'oligochaeta', 'oligochaeta.jpg', 1, { tolerance: 8, taille: 1 });
            carte = new Carte('macroInvertebre', 'oligochaeta', 'oligochaeta.jpg', 1, { tolerance: 8, taille: 1 });
            carte = new Carte('macroInvertebre', 'oligochaeta', 'oligochaeta.jpg', 1, { tolerance: 8, taille: 1 });
            carte = new Carte('macroInvertebre', 'oligochaeta', 'oligochaeta.jpg', 1, { tolerance: 8, taille: 1 });
            carte = new Carte('macroInvertebre', 'oligochaeta', 'oligochaeta.jpg', 1, { tolerance: 8, taille: 1 });
            carte = new Carte('macroInvertebre', 'oligochaeta', 'oligochaeta.jpg', 1, { tolerance: 8, taille: 1 });
            carte = new Carte('macroInvertebre', 'oligochaeta', 'oligochaeta.jpg', 1, { tolerance: 8, taille: 1 });
            carte = new Carte('macroInvertebre', 'oligochaeta', 'oligochaeta.jpg', 1, { tolerance: 8, taille: 1 });
            carte = new Carte('macroInvertebre', 'oligochaeta', 'oligochaeta.jpg', 1, { tolerance: 8, taille: 1 });
            carte = new Carte('macroInvertebre', 'oligochaeta', 'oligochaeta.jpg', 1, { tolerance: 8, taille: 1 });
            carte = new Carte('macroInvertebre', 'oligochaeta', 'oligochaeta.jpg', 1, { tolerance: 8, taille: 1 });
            carte = new Carte('macroInvertebre', 'oligochaeta', 'oligochaeta.jpg', 1, { tolerance: 8, taille: 1 });
            carte = new Carte('macroInvertebre', 'oligochaeta', 'oligochaeta.jpg', 1, { tolerance: 8, taille: 1 });
            carte = new Carte('macroInvertebre', 'oligochaeta', 'oligochaeta.jpg', 1, { tolerance: 8, taille: 1 });
            carte = new Carte('macroInvertebre', 'oligochaeta', 'oligochaeta.jpg', 1, { tolerance: 8, taille: 1 });
            carte = new Carte('macroInvertebre', 'oligochaeta', 'oligochaeta.jpg', 1, { tolerance: 8, taille: 1 });
            carte = new Carte('macroInvertebre', 'oligochaeta', 'oligochaeta.jpg', 1, { tolerance: 8, taille: 1 });
            carte = new Carte('macroInvertebre', 'oligochaeta', 'oligochaeta.jpg', 1, { tolerance: 8, taille: 1 });
            carte = new Carte('macroInvertebre', 'oligochaeta', 'oligochaeta.jpg', 1, { tolerance: 8, taille: 1 });




            return paquetCarte;
        }

        //Fonction qui "update" le jeu.
        function updateGameArea() {

        }
    </script>
</body>
</html>