<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="style.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
</head>
<body onload="startGame()">
    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script src="https://code.jquery.com/ui/1.12.0/jquery-ui.js"></script>
    <script>
        var paquetCarte;

        //Fonction appeler au début, elle "start" le jeu.
        function startGame() {
            creerFond();
            ajouterEmplacementHabitatBas();
            ajouterEmplacementCarteBas();
            //paquetCarte = creerPaquetCarte();
            //melangerPaquetCarte(paquetCarte);
            //pigerCarte();
            creerMain();
        }

        //Fonction qui ajoute une div avec le plateau en fond d'écran.
        function creerFond() {
            var divMain = document.createElement('div');
            divMain.id = 'divMain';
            divMain.className = 'divMain';
            document.getElementsByTagName('body')[0].appendChild(divMain);

            var plateau = document.createElement('div');
            plateau.id = 'plateau';
            plateau.className = 'plateau';
            document.getElementsByTagName('body')[0].appendChild(plateau);
        }

        //Fonction qui ajoute 6 emplacement d'habitats dans le bas.
        function ajouterEmplacementHabitatBas() {
            //Boucle 6 fois pour ajouter les 6 emplacements D'habitats du bas.
            var id;
            for (id = 1; id < 7; id++) {
                var divEmplacementHabitat = document.createElement('div');
                divEmplacementHabitat.id = 'divEmplacementHabitatBas' + id;
                divEmplacementHabitat.className = 'divEmplacementHabitatBas';
                divEmplacementHabitat.style.left = 117 + 66 * id + 'px';
                document.getElementById('plateau').appendChild(divEmplacementHabitat);
                $(function () {
                    $('.divEmplacementHabitatBas').droppable({
                        drop: function (event, ui) {
                            ui.draggable.draggable('disable');
                            ui.draggable.position({ of: $(this), my: 'center', at: 'center' });
                        }
                    });
                });
            }
        }

        //Fonction qui ajoute 4 emplacement de carte sur les emplacements d'habitats du bas.
        function ajouterEmplacementCarteBas() {
            //Boucle 4 fois pour ajouter les 4 emplacements sur les emplacements D'habitats du bas.
            var id;
            for (id = 1; id < 5; id++) {
                var divEmplacementCarte = document.createElement('div');
                divEmplacementCarte.id = 'divEmplacementCarteBas' + id;
                divEmplacementCarte.className = 'divEmplacementCarteBas';
                divEmplacementCarte.style.left = 181 + 66 * id + 'px';
                document.getElementById('plateau').appendChild(divEmplacementCarte);
                $(function () {
                    $('.divEmplacementCarteBas').droppable({
                        drop: function (event, ui) {
                            ui.draggable.draggable('disable');
                            ui.draggable.position({ of: $(this), my: 'center', at: 'center' });
                        }
                    });
                });
            }
        }

        function creerMain() {
            var id;
            for (id = 1; id < 7; id++) {
                var iDiv = document.createElement('div');
                iDiv.id = 'divCarte' + id;
                iDiv.className = 'divCarte';
                document.getElementById('divMain').appendChild(iDiv);

                var image = document.createElement('img');
                image.id = 'imageCarte'+ id;
                image.className = 'imageCarte';
                image.src = 'resources/CarteEau.jpg';
                // Mes image Dans le idiv
                iDiv.appendChild(image);

                $(function () {
                    $('.divCarte').draggable({ revert: 'invalid' });
                });
            }
        }
        /*****************************TEST*******/
        
        //Définition de la classe.
        function Carte(type, nom, params) {
            if (type === 'predateur') {
                this.nom = nom;
                this.type = type;
                this.tolerance = params.tolerance;
                this.force = params.force;
                this.coutResources = params.coutResources;
                this.condition = params.condition;
            }
            else if (type === 'habitats') {
                this.nom = nom;
                this.type = type;
                this.habitats = params.habitats;
                this.coutResources = params.coutResources;
            }
            else if (type === 'solmonide') {
                this.nom = nom;
                this.type = type;
                this.coutResources = params.coutResources;
                this.condition = params.condition;
            }
        }

        //function pour piger une carte.
        function pigerCarte(paquetCarte) {

        }

        //Function qui melange le paquet de carte.
        function melangerPaquetCarte() {

        }

        //function qui crée le paquet de carte.
        function creerPaquetCarte() {
            var paquetCarte = new Array();
            /* Exemple d'une création de carte.
            var carte = new Carte(predateur, { tolerance: 5, force: 10, coutResources: 2, condition: [1, 2, 3] });
            */
            return paquetCarte;
        }
        /*****************************************/

        
        //Fonction qui "update" le jeu.
        function updateGameArea() {
            
        }
    </script>
</body>
</html>